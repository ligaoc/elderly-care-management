# RuoYi-Vue-Plus 项目结构和关键文件说明

## 一、后端项目结构详解

### 1.1 ruoyi-admin（主应用入口）

```
ruoyi-admin/
├── src/main/java/org/dromara/
│   └── RuoYiApplication.java          # 应用启动类
├── src/main/resources/
│   ├── application.yml                # 主配置文件
│   ├── application-dev.yml            # 开发环境配置
│   ├── application-prod.yml           # 生产环境配置
│   ├── logback-spring.xml             # 日志配置
│   └── banner.txt                     # 启动横幅
└── pom.xml                            # Maven配置
```

**关键配置**:
- `application.yml`: 数据库连接、Redis、文件存储等配置
- `application-dev.yml`: 开发环境特定配置
- `application-prod.yml`: 生产环境特定配置

### 1.2 ruoyi-common（公共组件库）

| 模块 | 说明 | 主要功能 |
|------|------|--------|
| ruoyi-common-core | 核心工具 | 异常处理、工具类、常量定义 |
| ruoyi-common-mybatis | MyBatis扩展 | 分页、数据权限、多数据源 |
| ruoyi-common-redis | Redis支持 | 缓存、分布式锁、消息队列 |
| ruoyi-common-satoken | 权限认证 | 登录认证、权限校验、Token管理 |
| ruoyi-common-web | Web支持 | 请求响应处理、异常处理 |
| ruoyi-common-excel | Excel工具 | 导入导出、数据转换 |
| ruoyi-common-log | 日志记录 | 操作日志、登录日志 |
| ruoyi-common-encrypt | 数据加密 | 字段加密、传输加密 |
| ruoyi-common-translation | 数据翻译 | 字典翻译、数据转换 |
| ruoyi-common-tenant | 多租户 | 租户隔离、数据权限 |

### 1.3 ruoyi-modules（业务模块）

#### ruoyi-system（系统管理模块）

```
ruoyi-system/
├── src/main/java/org/dromara/system/
│   ├── controller/
│   │   ├── SysUserController.java
│   │   ├── SysDeptController.java
│   │   ├── SysRoleController.java
│   │   ├── SysMenuController.java
│   │   └── ...
│   ├── service/
│   │   ├── ISysUserService.java
│   │   ├── ISysDeptService.java
│   │   ├── ISysRoleService.java
│   │   └── ...
│   ├── mapper/
│   │   ├── SysUserMapper.java
│   │   ├── SysDeptMapper.java
│   │   ├── SysRoleMapper.java
│   │   └── ...
│   └── domain/
│       ├── SysUser.java
│       ├── SysDept.java
│       ├── SysRole.java
│       ├── bo/
│       └── vo/
└── src/main/resources/
    └── mapper/
        └── system/
            ├── SysUserMapper.xml
            ├── SysDeptMapper.xml
            └── ...
```

**主要功能**:
- 用户管理: 用户增删改查、密码修改、头像上传
- 部门管理: 部门树形结构、部门数据权限
- 角色管理: 角色权限分配、角色菜单配置
- 菜单管理: 菜单树形结构、权限标识管理
- 字典管理: 系统字典维护
- 参数管理: 系统参数配置
- 通知公告: 公告发布管理
- 操作日志: 用户操作日志查询
- 登录日志: 用户登录日志查询

#### ruoyi-demo（示例模块）

```
ruoyi-demo/
├── src/main/java/org/dromara/demo/
│   ├── controller/
│   │   ├── TestDemoController.java      # 单表CRUD示例
│   │   ├── TestTreeController.java      # 树形结构示例
│   │   ├── TestExcelController.java     # Excel导入导出示例
│   │   ├── TestEncryptController.java   # 数据加密示例
│   │   ├── RedisCacheController.java    # Redis缓存示例
│   │   ├── RedisLockController.java     # 分布式锁示例
│   │   └── ...
│   ├── service/
│   ├── mapper/
│   └── domain/
└── src/main/resources/
    └── mapper/
        └── demo/
```

**示例功能**:
- 单表CRUD: 基础增删改查操作
- 树形结构: 树形数据处理
- Excel操作: 导入导出功能
- 数据加密: 字段加密存储
- Redis缓存: 缓存使用示例
- 分布式锁: 锁的使用示例
- 消息队列: 队列操作示例

#### ruoyi-job（定时任务模块）

```
ruoyi-job/
├── src/main/java/org/dromara/job/
│   ├── controller/
│   │   └── SysJobController.java
│   ├── service/
│   ├── mapper/
│   └── domain/
└── src/main/resources/
```

**主要功能**:
- 定时任务管理: 任务增删改查
- 任务执行: 任务调度执行
- 任务日志: 任务执行日志查询

#### ruoyi-generator（代码生成模块）

```
ruoyi-generator/
├── src/main/java/org/dromara/generator/
│   ├── controller/
│   │   └── SysGeneratorController.java
│   ├── service/
│   ├── mapper/
│   └── domain/
└── src/main/resources/
    └── templates/
        ├── java/
        │   ├── entity.java.vm
        │   ├── mapper.java.vm
        │   ├── service.java.vm
        │   ├── controller.java.vm
        │   └── ...
        └── vue/
            ├── index.vue.vm
            ├── api.ts.vm
            └── types.ts.vm
```

**主要功能**:
- 表结构导入: 导入数据库表
- 代码生成: 生成Java和Vue代码
- 模板管理: 自定义代码模板

#### ruoyi-workflow（工作流模块）

```
ruoyi-workflow/
├── src/main/java/org/dromara/workflow/
│   ├── controller/
│   ├── service/
│   ├── mapper/
│   └── domain/
└── src/main/resources/
```

**主要功能**:
- 流程定义: 流程设计和配置
- 流程实例: 流程执行管理
- 任务管理: 待办任务处理
- 流程监控: 流程执行监控

### 1.4 ruoyi-extend（扩展模块）

#### ruoyi-monitor-admin（监控模块）

- 系统监控: CPU、内存、磁盘监控
- 在线日志: 实时查看应用日志
- 应用管理: 应用信息管理

#### ruoyi-snailjob-server（定时任务服务）

- 分布式任务调度
- 任务重试机制
- 任务分片处理

---

## 二、前端项目结构详解

### 2.1 核心目录结构

```
plus-ui/src/
├── api/                    # API接口层
│   ├── demo/              # 演示模块API
│   ├── system/            # 系统模块API
│   ├── monitor/           # 监控模块API
│   ├── tool/              # 工具模块API
│   ├── workflow/          # 工作流模块API
│   ├── login.ts           # 登录API
│   ├── menu.ts            # 菜单API
│   └── types.ts           # 全局类型定义
├── views/                 # 页面组件
│   ├── demo/              # 演示页面
│   ├── system/            # 系统管理页面
│   ├── monitor/           # 监控页面
│   ├── tool/              # 工具页面
│   ├── workflow/          # 工作流页面
│   ├── login.vue          # 登录页面
│   └── register.vue       # 注册页面
├── components/            # 公共组件
│   ├── Breadcrumb/        # 面包屑
│   ├── DictTag/           # 字典标签
│   ├── Editor/            # 编辑器
│   ├── FileUpload/        # 文件上传
│   ├── ImageUpload/       # 图片上传
│   ├── Pagination/        # 分页
│   ├── RightToolbar/      # 右侧工具栏
│   ├── SvgIcon/           # SVG图标
│   └── ...
├── store/                 # Pinia状态管理
│   ├── modules/
│   │   ├── app.ts         # 应用状态
│   │   ├── user.ts        # 用户状态
│   │   ├── permission.ts  # 权限状态
│   │   └── ...
│   └── index.ts
├── router/                # 路由配置
│   └── index.ts           # 路由定义
├── utils/                 # 工具函数
│   ├── request.ts         # HTTP请求
│   ├── auth.ts            # 权限工具
│   ├── dict.ts            # 字典工具
│   ├── validate.ts        # 验证工具
│   ├── errorCode.ts       # 错误码处理
│   └── ...
├── hooks/                 # 自定义Hook
│   └── useDialog.ts       # 对话框Hook
├── directive/             # 自定义指令
│   ├── common/            # 通用指令
│   │   ├── v-loading.ts   # 加载指令
│   │   └── ...
│   └── permission/        # 权限指令
│       ├── v-hasPermi.ts  # 权限指令
│       └── v-hasRole.ts   # 角色指令
├── types/                 # 全局类型定义
│   ├── auto-imports.d.ts  # 自动导入类型
│   ├── axios.d.ts         # Axios类型
│   ├── components.d.ts    # 组件类型
│   ├── global.d.ts        # 全局类型
│   └── ...
├── layout/                # 布局组件
│   ├── components/
│   │   ├── Sidebar/       # 侧边栏
│   │   ├── Header/        # 头部
│   │   ├── TagsView/      # 标签页
│   │   └── ...
│   └── index.vue          # 主布局
├── plugins/               # 插件
│   ├── auth.ts            # 权限插件
│   ├── cache.ts           # 缓存插件
│   ├── download.ts        # 下载插件
│   ├── modal.ts           # 模态框插件
│   └── ...
├── assets/                # 静态资源
│   ├── images/            # 图片
│   ├── icons/             # 图标
│   ├── styles/            # 样式
│   └── logo/              # Logo
├── App.vue                # 根组件
├── main.ts                # 应用入口
├── permission.ts          # 权限控制
└── settings.ts            # 应用设置
```

### 2.2 关键文件说明

#### 2.2.1 路由配置 (`router/index.ts`)

```typescript
// 定义应用路由
// 支持动态路由加载
// 支持权限路由控制
```

#### 2.2.2 状态管理 (`store/modules/`)

- `app.ts`: 应用全局状态（主题、语言等）
- `user.ts`: 用户信息状态
- `permission.ts`: 权限和菜单状态
- `dict.ts`: 字典数据状态

#### 2.2.3 权限控制 (`permission.ts`)

```typescript
// 路由权限控制
// 动态菜单加载
// 权限校验
```

#### 2.2.4 HTTP请求 (`utils/request.ts`)

```typescript
// 请求拦截器
// 响应拦截器
// 错误处理
// Token管理
```

---

## 三、关键配置文件

### 3.1 后端配置

#### application.yml

```yaml
# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /

# 数据源配置
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ry_vue_plus
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver

# Redis配置
  redis:
    host: localhost
    port: 6379
    password: 

# MyBatis配置
mybatis-plus:
  mapper-locations: classpath*:mapper/**/*.xml
  type-aliases-package: org.dromara.**.domain
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# Sa-Token配置
sa-token:
  token-name: Authorization
  timeout: 2592000
  activity-timeout: -1
  is-concurrent: true
  is-share: true
  token-style: uuid
```

### 3.2 前端配置

#### vite.config.ts

```typescript
// Vite构建配置
// 代理配置
// 插件配置
// 优化配置
```

#### tsconfig.json

```json
// TypeScript编译配置
// 路径别名配置
// 严格模式配置
```

#### .env.development

```
# 开发环境变量
VITE_APP_TITLE=RuoYi-Vue-Plus
VITE_API_BASE_URL=http://localhost:8080
```

#### .env.production

```
# 生产环境变量
VITE_APP_TITLE=RuoYi-Vue-Plus
VITE_API_BASE_URL=/api
```

---

## 四、数据库表关系

### 4.1 系统表关系图

```
sys_user (用户表)
  ├── sys_dept (部门表)
  ├── sys_user_role (用户角色关联表)
  │   └── sys_role (角色表)
  │       ├── sys_role_menu (角色菜单关联表)
  │       │   └── sys_menu (菜单表)
  │       └── sys_role_dept (角色部门关联表)
  │           └── sys_dept (部门表)
  ├── sys_user_post (用户岗位关联表)
  │   └── sys_post (岗位表)
  └── sys_social (社交账号表)

sys_dict_type (字典类型表)
  └── sys_dict_data (字典数据表)

sys_config (参数表)

sys_notice (通知公告表)

sys_oper_log (操作日志表)

sys_login_log (登录日志表)

sys_file (文件表)

sys_oss_config (OSS配置表)

sys_tenant (租户表)
  └── sys_tenant_package (租户套餐表)

sys_client (客户端表)
```

### 4.2 主要表字段

#### sys_user (用户表)

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | BIGINT | 用户ID |
| dept_id | BIGINT | 部门ID |
| user_name | VARCHAR | 用户账号 |
| nick_name | VARCHAR | 用户昵称 |
| email | VARCHAR | 邮箱 |
| phonenumber | VARCHAR | 手机号 |
| sex | CHAR | 性别 |
| avatar | BIGINT | 头像 |
| password | VARCHAR | 密码 |
| status | CHAR | 状态 |
| del_flag | CHAR | 删除标志 |
| create_time | DATETIME | 创建时间 |
| update_time | DATETIME | 更新时间 |

#### sys_role (角色表)

| 字段 | 类型 | 说明 |
|------|------|------|
| role_id | BIGINT | 角色ID |
| role_name | VARCHAR | 角色名称 |
| role_key | VARCHAR | 角色权限字符串 |
| role_sort | INT | 显示顺序 |
| status | CHAR | 状态 |
| del_flag | CHAR | 删除标志 |
| create_time | DATETIME | 创建时间 |

#### sys_menu (菜单表)

| 字段 | 类型 | 说明 |
|------|------|------|
| menu_id | BIGINT | 菜单ID |
| parent_id | BIGINT | 父菜单ID |
| menu_name | VARCHAR | 菜单名称 |
| path | VARCHAR | 路由地址 |
| component | VARCHAR | 组件路径 |
| perms | VARCHAR | 权限标识 |
| icon | VARCHAR | 菜单图标 |
| visible | CHAR | 是否可见 |
| status | CHAR | 状态 |
| create_time | DATETIME | 创建时间 |

---

## 五、常用命令

### 5.1 后端命令

```bash
# 启动应用
mvn spring-boot:run

# 打包应用
mvn clean package

# 跳过测试打包
mvn clean package -DskipTests

# 运行测试
mvn test

# 清理构建
mvn clean
```

### 5.2 前端命令

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build:prod

# 构建开发版本
npm run build:dev

# 预览构建结果
npm run preview

# ESLint检查
npm run lint:eslint

# ESLint修复
npm run lint:eslint:fix

# Prettier格式化
npm run prettier
```

### 5.3 Docker命令

```bash
# 构建镜像
docker-compose build

# 启动容器
docker-compose up -d

# 停止容器
docker-compose down

# 查看日志
docker-compose logs -f
```

---

## 六、开发工具推荐

### 6.1 IDE

- **IntelliJ IDEA**: Java开发首选
- **VS Code**: 前端开发推荐
- **WebStorm**: 专业前端IDE

### 6.2 插件

**IntelliJ IDEA**:
- Lombok
- MyBatis Plus
- Vue.js
- TypeScript

**VS Code**:
- Vetur
- ESLint
- Prettier
- TypeScript Vue Plugin

### 6.3 其他工具

- **Git**: 版本控制
- **Maven**: Java构建工具
- **Node.js**: JavaScript运行环境
- **Docker**: 容器化部署
- **Postman**: API测试
- **MySQL Workbench**: 数据库管理

