# Implementation Plan: 健康管理后台系统

## Overview

基于RuoYi-Vue-Plus框架开发健康管理后台系统，包含数据库表创建、后端Java模块开发、前端Vue页面开发。采用增量开发方式，先完成核心功能，再逐步完善。

## Tasks

- [x] 1. 数据库表结构创建
  - [x] 1.1 创建完整的数据库SQL脚本
    - 创建8张核心业务表：设备类型、设备、告警、组织、老人、紧急联系人、体征数据、服务人员
    - 添加索引和外键约束
    - 插入初始化数据（设备类型、字典数据）
    - _Requirements: 2.1, 3.1, 4.1, 5.1, 6.1, 7.1, 8.1, 9.1_
  - [x] 1.2 创建菜单SQL脚本
    - 创建健康管理一级菜单
    - 创建各子模块菜单和按钮权限
    - _Requirements: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 8.1, 9.1_

- [x] 2. 后端模块基础结构搭建
  - [x] 2.1 创建ruoyi-health模块
    - 创建模块pom.xml配置
    - 创建包结构(controller/service/mapper/domain)
    - 配置模块依赖
    - _Requirements: 全部_
  - [x] 2.2 创建Entity实体类
    - 创建8个实体类继承TenantEntity
    - 添加MyBatis-Plus注解
    - _Requirements: 2.1, 3.1, 4.1, 5.1, 6.1, 7.1, 8.1, 9.1_
  - [x] 2.3 创建BO/VO对象
    - 创建各实体的Bo和Vo类
    - 添加字段校验注解
    - _Requirements: 全部_
  - [x] 2.4 创建Mapper接口和XML
    - 创建8个Mapper接口继承BaseMapperPlus
    - 创建对应的XML映射文件
    - _Requirements: 全部_

- [x] 3. 设备类型管理模块开发
  - [x] 3.1 创建设备类型Service
    - 实现IHealthDeviceTypeService接口
    - 实现树形结构查询
    - 实现CRUD方法
    - 实现删除约束检查
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6_
  - [x] 3.2 创建设备类型Controller
    - 实现列表/树形/详情/新增/修改/删除接口
    - 添加权限注解和日志注解
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6_

- [x] 4. 设备管理模块开发
  - [x] 4.1 创建设备Service
    - 实现IHealthDeviceService接口
    - 实现设备编码生成
    - 实现绑定/解绑功能
    - 实现导入导出功能
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9_
  - [x] 4.2 创建设备Controller
    - 实现列表/详情/新增/修改/删除/绑定/解绑/导入/导出接口
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9_

- [x] 5. 告警管理模块开发
  - [x] 5.1 创建告警Service
    - 实现IHealthDeviceAlertService接口
    - 实现告警处理和忽略功能
    - 实现告警自动生成功能
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_
  - [x] 5.2 创建告警Controller
    - 实现列表/详情/处理/忽略/导出接口
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_

- [x] 6. 组织管理模块开发
  - [x] 6.1 创建组织Service
    - 实现IHealthOrganizationService接口
    - 实现树形结构查询
    - 实现删除约束检查
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_
  - [x] 6.2 创建组织Controller
    - 实现列表/树形/详情/新增/修改/删除接口
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 7. 老人管理模块开发
  - [x] 7.1 创建老人Service
    - 实现IHealthElderService接口
    - 实现用户编码生成
    - 实现BMI自动计算
    - 实现导入导出功能
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8_
  - [x] 7.2 创建老人Controller
    - 实现列表/详情/新增/修改/删除/导入/导出接口
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8_
  - [x] 7.3 创建紧急联系人Service和Controller
    - 实现联系人CRUD
    - 实现主要联系人唯一性约束
    - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [x] 8. 体征数据模块开发
  - [x] 8.1 创建体征数据Service
    - 实现IHealthVitalSignsService接口
    - 实现异常判断逻辑
    - 实现趋势数据查询
    - 实现异常告警自动生成
    - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5, 8.7_
  - [x] 8.2 创建体征数据Controller
    - 实现列表/详情/趋势/新增/导出接口
    - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_

- [x] 9. 服务人员模块开发
  - [x] 9.1 创建服务人员Service
    - 实现IHealthServiceStaffService接口
    - 实现CRUD方法
    - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_
  - [x] 9.2 创建服务人员Controller
    - 实现列表/详情/新增/修改/删除接口
    - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_

- [x] 10. 大屏数据模块开发
  - [x] 10.1 创建大屏数据Service
    - 实现IHealthDashboardService接口
    - 实现统计数据查询
    - 实现设备在线率计算
    - 实现告警趋势统计
    - 实现告警类型分布统计
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_
  - [x] 10.2 创建大屏数据Controller
    - 实现统计/在线率/趋势/分布/最新告警/设备分布接口
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_

- [x] 11. Checkpoint - 后端开发完成
  - 所有后端Service和Controller已创建
  - 等待编译验证

- [x] 12. 前端API层开发
  - [x] 12.1 创建前端API类型定义
    - 创建health目录下各模块的types.ts
    - 定义VO/Form/Query接口
    - _Requirements: 全部_
  - [x] 12.2 创建前端API方法
    - 创建health目录下各模块的index.ts
    - 实现所有API调用方法
    - _Requirements: 全部_

- [x] 13. 前端页面开发 - 设备管理
  - [x] 13.1 创建设备类型管理页面
    - 实现树形表格展示
    - 实现新增/修改/删除功能
    - 实现分类筛选
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6_
  - [x] 13.2 创建设备管理页面
    - 实现设备列表展示
    - 实现新增/修改/删除功能
    - 实现绑定/解绑功能
    - 实现导入/导出功能
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8_

- [x] 14. 前端页面开发 - 告警管理
  - [x] 14.1 创建告警管理页面
    - 实现告警列表展示（带级别颜色标识）
    - 实现告警详情弹窗（含地图）
    - 实现处理/忽略功能
    - 实现筛选和导出功能
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8_

- [x] 15. 前端页面开发 - 组织管理
  - [x] 15.1 创建组织管理页面
    - 实现树形表格展示
    - 实现新增/修改/删除功能
    - 实现类型筛选
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 16. 前端页面开发 - 老人管理
  - [x] 16.1 创建老人管理页面
    - 实现老人列表展示
    - 实现新增/修改/删除功能
    - 实现详情页面（含健康档案）
    - 实现紧急联系人管理
    - 实现导入/导出功能
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [x] 17. 前端页面开发 - 体征数据
  - [x] 17.1 创建体征数据页面
    - 实现体征数据列表展示（异常值红色标识）
    - 实现趋势图表展示
    - 实现新增/导出功能
    - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5, 8.6_

- [x] 18. 前端页面开发 - 服务人员
  - [x] 18.1 创建服务人员管理页面
    - 实现人员列表展示
    - 实现新增/修改/删除功能
    - 实现类型筛选
    - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_

- [x] 19. 前端页面开发 - 数据大屏
  - [x] 19.1 创建数据大屏页面
    - 实现统计卡片展示
    - 实现设备在线率环形图
    - 实现告警趋势折线图
    - 实现告警类型分布饼图
    - 实现最新告警列表
    - 实现设备分布地图
    - 实现30秒自动刷新
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8_

- [x] 20. Checkpoint - 前端开发完成
  - 确保所有页面可正常访问
  - 确保CRUD功能正常
  - 如有问题请告知

- [ ] 21. 集成测试和优化
  - [ ] 21.1 功能测试
    - 测试所有CRUD功能
    - 测试业务规则（删除约束、唯一性等）
    - 测试大屏数据展示
    - _Requirements: 全部_
  - [ ] 21.2 数据初始化
    - 插入演示数据
    - 配置字典数据
    - _Requirements: 全部_

- [ ] 22. Final Checkpoint - 系统完成
  - 确保系统可正常启动使用
  - 确保所有功能正常
  - 如有问题请告知

## Notes

- 任务按照依赖关系排序，需按顺序执行
- 后端开发完成后再进行前端开发
- 每个Checkpoint需要确认功能正常后再继续
- 所有代码遵循RuoYi-Vue-Plus开发规范
- 支持多租户架构，所有表包含tenant_id字段

